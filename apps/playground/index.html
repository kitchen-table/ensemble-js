<!DOCTYPE html>
<html>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
  const socket = io('http://localhost:3000');

  const urlParams = new URLSearchParams(window.location.search);
  const roomId = urlParams.get('id');

  socket.on('connect', function () {
    socket.emit('join', { roomId: roomId });

    document.addEventListener('mousemove', (ev) => {
      socket.emit('mousemove', { x: ev.clientX, y: ev.clientY });
    });

    socket.on('mousemove', (data) => {
      const el = document.getElementById(data.sender);
      if (el) {
        el.style.left = data.x + 'px';
        el.style.top = data.y + 'px';
      } else {
        const div = document.createElement('div');
        div.id = data.sender;
        div.style.position = 'absolute';
        div.style.left = data.x + 'px';
        div.style.top = data.y + 'px';
        div.style.width = '10px';
        div.style.height = '10px';
        div.style.backgroundColor = 'red';
        div.innerText = data.sender;
        document.body.appendChild(div);
      }
    })
  });
</script>

</html>